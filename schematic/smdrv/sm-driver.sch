EESchema Schematic File Version 2
LIBS:amp
LIBS:avr
LIBS:buttons
LIBS:connectors
LIBS:dc-dc
LIBS:displays
LIBS:drivers
LIBS:logic
LIBS:mems
LIBS:optic
LIBS:passive
LIBS:power
LIBS:rtc
LIBS:sensors
LIBS:speakers
LIBS:transform
LIBS:transist
LIBS:wireless
LIBS:sm-driver-cache
EELAYER 25 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 1 1
Title "Step-motor driver mk.1"
Date "9 dec 2013"
Rev "5"
Comp ""
Comment1 ""
Comment2 "Sergei Ivanov"
Comment3 ""
Comment4 ""
$EndDescr
$Comp
L PWR_FLAG #FLG01
U 1 1 521B3363
P 5750 6750
F 0 "#FLG01" H 5750 6845 30  0001 C CNN
F 1 "PWR_FLAG" H 5750 6930 30  0000 C CNN
F 2 "" H 5750 6750 60  0001 C CNN
F 3 "" H 5750 6750 60  0001 C CNN
	1    5750 6750
	1    0    0    -1  
$EndComp
$Comp
L PWR_FLAG #FLG02
U 1 1 521B3362
P 6200 6750
F 0 "#FLG02" H 6200 6845 30  0001 C CNN
F 1 "PWR_FLAG" H 6200 6930 30  0000 C CNN
F 2 "" H 6200 6750 60  0001 C CNN
F 3 "" H 6200 6750 60  0001 C CNN
	1    6200 6750
	1    0    0    -1  
$EndComp
$Comp
L PWR_FLAG #FLG03
U 1 1 521B335E
P 6650 6750
F 0 "#FLG03" H 6650 6845 30  0001 C CNN
F 1 "PWR_FLAG" H 6650 6930 30  0000 C CNN
F 2 "" H 6650 6750 60  0001 C CNN
F 3 "" H 6650 6750 60  0001 C CNN
	1    6650 6750
	1    0    0    -1  
$EndComp
Wire Wire Line
	-3700 1250 -3700 1750
Wire Wire Line
	5750 6750 5750 7150
Wire Wire Line
	6650 6750 6650 7150
Wire Wire Line
	-750 6500 -750 6750
Connection ~ -5000 1750
Wire Wire Line
	-5000 1750 -6250 1750
Wire Wire Line
	-6250 1750 -6250 1900
Wire Wire Line
	-6250 2400 -6250 2550
Connection ~ -5200 2250
Wire Wire Line
	-5550 2250 -5200 2250
Connection ~ -4550 2050
Wire Wire Line
	-5550 2050 -4550 2050
Wire Wire Line
	-4550 2400 -4550 2700
Connection ~ -5000 1350
Wire Wire Line
	-5000 1350 -4550 1350
Wire Wire Line
	-4550 1350 -4550 1450
Wire Wire Line
	-5200 1250 -5200 3000
Connection ~ -3400 2600
Wire Wire Line
	-3900 2400 -3900 2600
Wire Wire Line
	-3900 2600 -3400 2600
Connection ~ -3700 1450
Wire Wire Line
	-3700 1450 -3900 1450
Connection ~ -3100 1450
Wire Wire Line
	-2300 2100 -2300 1450
Wire Wire Line
	-2300 1450 -3100 1450
Wire Wire Line
	-3700 1750 -3500 1750
Wire Wire Line
	-3500 1750 -3500 3100
Connection ~ -2850 2900
Wire Wire Line
	-2850 2400 -2850 2900
Wire Wire Line
	-1900 4400 -1900 5250
Wire Wire Line
	-4700 3450 -3900 3450
Wire Wire Line
	-4300 5150 -4300 5250
Wire Wire Line
	-500 6750 -500 6950
Wire Wire Line
	-650 3900 -800 3900
Wire Wire Line
	-800 3900 -800 3750
Wire Wire Line
	-650 3400 -900 3400
Wire Wire Line
	-900 3400 -900 3550
Wire Wire Line
	-3300 2900 -1300 2900
Connection ~ -1700 2900
Wire Wire Line
	-1700 2900 -1700 3100
Connection ~ -2500 2900
Wire Wire Line
	-2500 2900 -2500 3100
Connection ~ -1900 4400
Connection ~ -1700 4400
Wire Wire Line
	-1700 4400 -1700 4250
Connection ~ -1300 3850
Wire Wire Line
	-1300 3400 -1300 3950
Connection ~ -1700 3750
Wire Wire Line
	-1700 3400 -1700 3950
Connection ~ -2100 3650
Wire Wire Line
	-2100 3400 -2100 3950
Connection ~ -2500 3550
Wire Wire Line
	-2500 3400 -2500 3950
Connection ~ -4300 5150
Wire Wire Line
	-4450 5150 -4150 5150
Wire Wire Line
	-4150 5150 -4150 5050
Wire Wire Line
	-4450 5150 -4450 5050
Connection ~ -4450 4200
Wire Wire Line
	-4450 4550 -4450 4200
Wire Wire Line
	-4700 4200 -3900 4200
Wire Wire Line
	-4700 3850 -3900 3850
Wire Wire Line
	-4700 3650 -3900 3650
Wire Wire Line
	-4700 3550 -3900 3550
Wire Wire Line
	-4700 3750 -3900 3750
Wire Wire Line
	-4700 4300 -3900 4300
Wire Wire Line
	-4150 4550 -4150 4300
Connection ~ -4150 4300
Wire Wire Line
	-2500 4250 -2500 4400
Wire Wire Line
	-2500 4400 -1300 4400
Wire Wire Line
	-1300 4400 -1300 4250
Wire Wire Line
	-2100 4250 -2100 4400
Connection ~ -2100 4400
Wire Wire Line
	-1300 2900 -1300 3100
Wire Wire Line
	-2100 2900 -2100 3100
Connection ~ -2100 2900
Wire Wire Line
	-800 3650 -800 3500
Wire Wire Line
	-800 3500 -650 3500
Wire Wire Line
	-900 3850 -900 4000
Wire Wire Line
	-900 4000 -650 4000
Wire Wire Line
	-900 3550 -2950 3550
Wire Wire Line
	-2950 3650 -800 3650
Wire Wire Line
	-800 3750 -2950 3750
Wire Wire Line
	-2950 3850 -900 3850
Connection ~ -3300 2900
Wire Wire Line
	-3400 1250 -3400 3100
Wire Wire Line
	-3300 1750 -3300 3100
Wire Wire Line
	-3100 1750 -3300 1750
Wire Wire Line
	-3100 1250 -3100 1750
Wire Wire Line
	-2850 2100 -2850 1550
Wire Wire Line
	-2850 1550 -3400 1550
Connection ~ -3400 1550
Wire Wire Line
	-2300 2400 -2300 2750
Wire Wire Line
	-2300 2750 -3400 2750
Connection ~ -3400 2750
Wire Wire Line
	-3900 1450 -3900 2100
Wire Wire Line
	-4550 2700 -5200 2700
Connection ~ -5200 2700
Wire Wire Line
	-5000 1250 -5000 3000
Wire Wire Line
	-4550 1950 -4550 2100
Wire Wire Line
	-5550 2150 -5100 2150
Wire Wire Line
	-5100 2150 -5100 3000
Wire Wire Line
	-6250 2850 -6250 2900
Wire Wire Line
	-6250 2900 -5200 2900
Connection ~ -5200 2900
Wire Wire Line
	-6250 2500 -5300 2500
Wire Wire Line
	-5300 2500 -5300 3000
Connection ~ -6250 2500
Wire Wire Line
	-850 6500 -850 6950
Wire Wire Line
	6200 6750 6200 7150
$Comp
L +5V #PWR05
U 1 1 521611B5
P -5000 1250
F 0 "#PWR05" H -4800 1200 60  0001 C CNN
F 1 "+5V" H -5000 1400 60  0000 C CNN
F 2 "" H -5000 1250 60  0001 C CNN
F 3 "" H -5000 1250 60  0001 C CNN
	1    -5000 1250
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR06
U 1 1 521610F7
P -5200 1250
F 0 "#PWR06" H -5050 1300 60  0001 C CNN
F 1 "GND" H -5200 1100 60  0000 C CNN
F 2 "" H -5200 1250 60  0001 C CNN
F 3 "" H -5200 1250 60  0001 C CNN
	1    -5200 1250
	-1   0    0    1   
$EndComp
$Comp
L CAP C3
U 1 1 5203890F
P -2300 2250
F 0 "C3" H -2350 2450 60  0000 C CNN
F 1 "470n" H -2300 2050 60  0000 C CNN
F 2 "" H -2300 2250 60  0001 C CNN
F 3 "" H -2300 2250 60  0001 C CNN
	1    -2300 2250
	0    1    1    0   
$EndComp
$Comp
L RES R6
U 1 1 52159EA2
P -6250 2150
F 0 "R6" H -6350 2250 60  0000 C CNN
F 1 "47k" H -6250 2150 60  0000 C CNN
F 2 "" H -6250 2150 60  0001 C CNN
F 3 "" H -6250 2150 60  0001 C CNN
	1    -6250 2150
	0    -1   -1   0   
$EndComp
$Comp
L ZENER D9
U 1 1 5208A780
P -6250 2700
F 0 "D9" H -6350 2850 60  0000 C CNN
F 1 "3V3" H -6250 2550 60  0000 C CNN
F 2 "" H -6250 2700 60  0001 C CNN
F 3 "" H -6250 2700 60  0001 C CNN
	1    -6250 2700
	0    -1   -1   0   
$EndComp
$Comp
L PIN_3X1 PIN10
U 1 1 5208A3D0
P -5550 2250
F 0 "PIN10" H -5300 2150 60  0000 C CNN
F 1 "osc_src" H -5250 2050 60  0000 C CNN
F 2 "" H -5550 2250 60  0001 C CNN
F 3 "" H -5550 2250 60  0001 C CNN
	1    -5550 2250
	-1   0    0    1   
$EndComp
$Comp
L PIN_2X1 PIN4
U 1 1 52048315
P -750 6500
F 0 "PIN4" H -750 6650 60  0000 C CNN
F 1 "term_drv_pwr" H -700 6350 60  0000 C CNN
F 2 "" H -750 6500 60  0001 C CNN
F 3 "" H -750 6500 60  0001 C CNN
	1    -750 6500
	0    1    -1   0   
$EndComp
$Comp
L PIN_2X1 PIN2
U 1 1 5204830C
P -1300 6500
F 0 "PIN2" H -1300 6650 60  0000 C CNN
F 1 "pin_ttl_pwr" H -1250 6350 60  0000 C CNN
F 2 "" H -1300 6500 60  0001 C CNN
F 3 "" H -1300 6500 60  0001 C CNN
	1    -1300 6500
	0    -1   -1   0   
$EndComp
$Comp
L GND #PWR08
U 1 1 52048292
P -500 6950
F 0 "#PWR08" H -350 7000 60  0001 C CNN
F 1 "GND" H -500 6800 60  0000 C CNN
F 2 "" H -500 6950 60  0001 C CNN
F 3 "" H -500 6950 60  0001 C CNN
	1    -500 6950
	1    0    0    -1  
$EndComp
$Comp
L +36V #PWR09
U 1 1 52048290
P -850 6950
F 0 "#PWR09" H -650 6900 60  0001 C CNN
F 1 "+36V" H -850 7100 60  0000 C CNN
F 2 "" H -850 6950 60  0001 C CNN
F 3 "" H -850 6950 60  0001 C CNN
	1    -850 6950
	-1   0    0    1   
$EndComp
$Comp
L +5V #PWR010
U 1 1 5204828C
P -1300 6950
F 0 "#PWR010" H -1100 6900 60  0001 C CNN
F 1 "+5V" H -1300 7100 60  0000 C CNN
F 2 "" H -1300 6950 60  0001 C CNN
F 3 "" H -1300 6950 60  0001 C CNN
	1    -1300 6950
	-1   0    0    1   
$EndComp
$Comp
L +36V #PWR011
U 1 1 520481B8
P 6200 7150
F 0 "#PWR011" H 6400 7100 60  0001 C CNN
F 1 "+36V" H 6200 7300 60  0000 C CNN
F 2 "" H 6200 7150 60  0001 C CNN
F 3 "" H 6200 7150 60  0001 C CNN
	1    6200 7150
	-1   0    0    1   
$EndComp
$Comp
L GND #PWR012
U 1 1 520481AE
P 6650 7150
F 0 "#PWR012" H 6800 7200 60  0001 C CNN
F 1 "GND" H 6650 7000 60  0000 C CNN
F 2 "" H 6650 7150 60  0001 C CNN
F 3 "" H 6650 7150 60  0001 C CNN
	1    6650 7150
	1    0    0    -1  
$EndComp
$Comp
L +5V #PWR013
U 1 1 520481AA
P 5750 7150
F 0 "#PWR013" H 5950 7100 60  0001 C CNN
F 1 "+5V" H 5750 7300 60  0000 C CNN
F 2 "" H 5750 7150 60  0001 C CNN
F 3 "" H 5750 7150 60  0001 C CNN
	1    5750 7150
	-1   0    0    1   
$EndComp
$Comp
L PIN_3X1 PIN3
U 1 1 52039732
P -6150 3650
F 0 "PIN3" H -5900 3550 60  0000 C CNN
F 1 "pin_drv" H -5850 3450 60  0000 C CNN
F 2 "" H -6200 3650 60  0000 C CNN
F 3 "" H -6200 3650 60  0000 C CNN
	1    -6150 3650
	-1   0    0    1   
$EndComp
$Comp
L PIN_2X1 PIN9
U 1 1 52038D1B
P -650 3900
F 0 "PIN9" H -650 4050 60  0000 C CNN
F 1 "term_out_cd" H -600 3750 60  0000 C CNN
F 2 "" H -650 3900 60  0001 C CNN
F 3 "" H -650 3900 60  0001 C CNN
	1    -650 3900
	1    0    0    -1  
$EndComp
$Comp
L PIN_2X1 PIN8
U 1 1 52038D00
P -650 3400
F 0 "PIN8" H -650 3550 60  0000 C CNN
F 1 "term_out_ab" H -600 3250 60  0000 C CNN
F 2 "" H -650 3400 60  0001 C CNN
F 3 "" H -650 3400 60  0001 C CNN
	1    -650 3400
	1    0    0    -1  
$EndComp
$Comp
L CAP C1
U 1 1 52038BDC
P -4550 2250
F 0 "C1" H -4600 2450 60  0000 C CNN
F 1 "470n" H -4550 2050 60  0000 C CNN
F 2 "" H -4550 2250 60  0001 C CNN
F 3 "" H -4550 2250 60  0001 C CNN
	1    -4550 2250
	0    1    1    0   
$EndComp
$Comp
L RES R3
U 1 1 52038B96
P -4550 1700
F 0 "R3" H -4650 1800 60  0000 C CNN
F 1 "22k" H -4550 1700 60  0000 C CNN
F 2 "" H -4550 1700 60  0001 C CNN
F 3 "" H -4550 1700 60  0001 C CNN
	1    -4550 1700
	0    1    1    0   
$EndComp
$Comp
L +36V #PWR015
U 1 1 52038901
P -3100 1250
F 0 "#PWR015" H -2900 1200 60  0001 C CNN
F 1 "+36V" H -3100 1400 60  0000 C CNN
F 2 "" H -3100 1250 60  0001 C CNN
F 3 "" H -3100 1250 60  0001 C CNN
	1    -3100 1250
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR016
U 1 1 520387E9
P -3400 1250
F 0 "#PWR016" H -3250 1300 60  0001 C CNN
F 1 "GND" H -3400 1100 60  0000 C CNN
F 2 "" H -3400 1250 60  0001 C CNN
F 3 "" H -3400 1250 60  0001 C CNN
	1    -3400 1250
	-1   0    0    1   
$EndComp
$Comp
L CAP C4
U 1 1 520387E0
P -2850 2250
F 0 "C4" H -2900 2450 60  0000 C CNN
F 1 "100n" H -2850 2050 60  0000 C CNN
F 2 "" H -2850 2250 60  0001 C CNN
F 3 "" H -2850 2250 60  0001 C CNN
	1    -2850 2250
	0    1    1    0   
$EndComp
$Comp
L GND #PWR017
U 1 1 5203873F
P -1900 5250
F 0 "#PWR017" H -1750 5300 60  0001 C CNN
F 1 "GND" H -1900 5050 60  0000 C CNN
F 2 "" H -1900 5250 60  0001 C CNN
F 3 "" H -1900 5250 60  0001 C CNN
	1    -1900 5250
	1    0    0    -1  
$EndComp
$Comp
L DIODE D8
U 1 1 5203866E
P -1300 4100
F 0 "D8" H -1400 4250 60  0000 C CNN
F 1 "DIODE" H -1300 3950 60  0000 C CNN
F 2 "" H -1300 4100 60  0001 C CNN
F 3 "" H -1300 4100 60  0001 C CNN
	1    -1300 4100
	0    -1   -1   0   
$EndComp
$Comp
L DIODE D6
U 1 1 5203866B
P -1700 4100
F 0 "D6" H -1800 4250 60  0000 C CNN
F 1 "DIODE" H -1700 3950 60  0000 C CNN
F 2 "" H -1700 4100 60  0001 C CNN
F 3 "" H -1700 4100 60  0001 C CNN
	1    -1700 4100
	0    -1   -1   0   
$EndComp
$Comp
L DIODE D4
U 1 1 52038668
P -2100 4100
F 0 "D4" H -2200 4250 60  0000 C CNN
F 1 "DIODE" H -2100 3950 60  0000 C CNN
F 2 "" H -2100 4100 60  0001 C CNN
F 3 "" H -2100 4100 60  0001 C CNN
	1    -2100 4100
	0    -1   -1   0   
$EndComp
$Comp
L DIODE D2
U 1 1 52038662
P -2500 4100
F 0 "D2" H -2600 4250 60  0000 C CNN
F 1 "DIODE" H -2500 3950 60  0000 C CNN
F 2 "" H -2500 4100 60  0001 C CNN
F 3 "" H -2500 4100 60  0001 C CNN
	1    -2500 4100
	0    -1   -1   0   
$EndComp
$Comp
L DIODE D7
U 1 1 52038659
P -1300 3250
F 0 "D7" H -1400 3400 60  0000 C CNN
F 1 "DIODE" H -1300 3100 60  0000 C CNN
F 2 "" H -1300 3250 60  0001 C CNN
F 3 "" H -1300 3250 60  0001 C CNN
	1    -1300 3250
	0    -1   -1   0   
$EndComp
$Comp
L DIODE D5
U 1 1 52038656
P -1700 3250
F 0 "D5" H -1800 3400 60  0000 C CNN
F 1 "DIODE" H -1700 3100 60  0000 C CNN
F 2 "" H -1700 3250 60  0001 C CNN
F 3 "" H -1700 3250 60  0001 C CNN
	1    -1700 3250
	0    -1   -1   0   
$EndComp
$Comp
L DIODE D3
U 1 1 52038650
P -2100 3250
F 0 "D3" H -2200 3400 60  0000 C CNN
F 1 "DIODE" H -2100 3100 60  0000 C CNN
F 2 "" H -2100 3250 60  0001 C CNN
F 3 "" H -2100 3250 60  0001 C CNN
	1    -2100 3250
	0    -1   -1   0   
$EndComp
$Comp
L DIODE D1
U 1 1 52038645
P -2500 3250
F 0 "D1" H -2600 3400 60  0000 C CNN
F 1 "DIODE" H -2500 3100 60  0000 C CNN
F 2 "" H -2500 3250 60  0001 C CNN
F 3 "" H -2500 3250 60  0001 C CNN
	1    -2500 3250
	0    -1   -1   0   
$EndComp
$Comp
L CAP C2
U 1 1 52037FA5
P -3900 2250
F 0 "C2" H -3950 2450 60  0000 C CNN
F 1 "100n" H -3900 2050 60  0000 C CNN
F 2 "" H -3900 2250 60  0001 C CNN
F 3 "" H -3900 2250 60  0001 C CNN
	1    -3900 2250
	0    -1   -1   0   
$EndComp
$Comp
L +5V #PWR018
U 1 1 52037F89
P -3700 1250
F 0 "#PWR018" H -3500 1200 60  0001 C CNN
F 1 "+5V" H -3700 1400 60  0000 C CNN
F 2 "" H -3700 1250 60  0001 C CNN
F 3 "" H -3700 1250 60  0001 C CNN
	1    -3700 1250
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR019
U 1 1 52037EF2
P -4300 5250
F 0 "#PWR019" H -4150 5300 60  0001 C CNN
F 1 "GND" H -4300 5050 60  0000 C CNN
F 2 "" H -4300 5250 60  0001 C CNN
F 3 "" H -4300 5250 60  0001 C CNN
	1    -4300 5250
	1    0    0    -1  
$EndComp
$Comp
L RES R5
U 1 1 52037D81
P -4150 4800
F 0 "R5" H -4250 4900 60  0000 C CNN
F 1 "0,5" H -4150 4800 60  0000 C CNN
F 2 "" H -4150 4800 60  0001 C CNN
F 3 "" H -4150 4800 60  0001 C CNN
	1    -4150 4800
	0    -1   -1   0   
$EndComp
$Comp
L RES R4
U 1 1 52037D7B
P -4450 4800
F 0 "R4" H -4550 4900 60  0000 C CNN
F 1 "0,5" H -4450 4800 60  0000 C CNN
F 2 "" H -4450 4800 60  0001 C CNN
F 3 "" H -4450 4800 60  0001 C CNN
	1    -4450 4800
	0    -1   -1   0   
$EndComp
$Comp
L L298N U2
U 1 1 52037CF2
P -3400 3750
F 0 "U2" H -3750 4350 60  0000 C CNN
F 1 "L298N" H -3200 3250 60  0000 C CNN
F 2 "" H -3400 3750 60  0000 C CNN
F 3 "" H -3400 3750 60  0000 C CNN
	1    -3400 3750
	1    0    0    -1  
$EndComp
$Comp
L L297 U1
U 1 1 5200F2D1
P -5150 3750
F 0 "U1" H -5500 4500 60  0000 C CNN
F 1 "L297" H -4900 3100 60  0000 C CNN
F 2 "" H -5150 3750 60  0000 C CNN
F 3 "" H -5150 3750 60  0000 C CNN
	1    -5150 3750
	1    0    0    -1  
$EndComp
Wire Wire Line
	-1300 6500 -1300 6950
Wire Wire Line
	-1200 6500 -1200 6750
Wire Wire Line
	-1200 6750 -500 6750
Connection ~ -750 6750
Wire Wire Line
	-4700 3950 -3900 3950
$Comp
L PIN_3X1 PIN?
U 1 1 59BCE3E5
P -6150 4050
F 0 "PIN?" H -5950 3950 60  0000 C CNN
F 1 "pin_ctrl" H -5850 3850 60  0000 C CNN
F 2 "" H -6200 4050 60  0000 C CNN
F 3 "" H -6200 4050 60  0000 C CNN
	1    -6150 4050
	-1   0    0    1   
$EndComp
$Comp
L GND #PWR?
U 1 1 59BDD736
P -5800 5250
F 0 "#PWR?" H -5650 5300 60  0001 C CNN
F 1 "GND" H -5800 5050 60  0000 C CNN
F 2 "" H -5800 5250 60  0001 C CNN
F 3 "" H -5800 5250 60  0001 C CNN
	1    -5800 5250
	1    0    0    -1  
$EndComp
Wire Wire Line
	-5650 4300 -5800 4300
Wire Wire Line
	-5800 4300 -5800 5250
Wire Wire Line
	-6150 3450 -5650 3450
Wire Wire Line
	-6150 3550 -5650 3550
Wire Wire Line
	-5650 3650 -6150 3650
$EndSCHEMATC
